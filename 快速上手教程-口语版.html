<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Claude Code 快速上手教程（口语版） | My Awesome Project</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/guogao-doc/assets/style.CGdbE5Xl.css" as="style">
    <link rel="preload stylesheet" href="/guogao-doc/vp-icons.css" as="style">
    
    <script type="module" src="/guogao-doc/assets/app.Cb36q6at.js"></script>
    <link rel="preload" href="/guogao-doc/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/guogao-doc/assets/chunks/theme.ep95m6mm.js">
    <link rel="modulepreload" href="/guogao-doc/assets/chunks/framework.UJbk18kQ.js">
    <link rel="modulepreload" href="/guogao-doc/assets/快速上手教程-口语版.md.CcZH0R7I.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-4813dc16><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c7c7d332></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c7c7d332>Skip to content</a><!--]--><!----><header class="VPNav" data-v-4813dc16 data-v-22c67d4f><div class="VPNavBar" data-v-22c67d4f data-v-438b78f0><div class="wrapper" data-v-438b78f0><div class="container" data-v-438b78f0><div class="title" data-v-438b78f0><div class="VPNavBarTitle" data-v-438b78f0 data-v-86e180a2><a class="title" href="/guogao-doc/" data-v-86e180a2><!--[--><!--]--><!----><span data-v-86e180a2>My Awesome Project</span><!--[--><!--]--></a></div></div><div class="content" data-v-438b78f0><div class="content-body" data-v-438b78f0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-438b78f0><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-438b78f0 data-v-88d68326><span id="main-nav-aria-label" class="visually-hidden" data-v-88d68326> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guogao-doc/" tabindex="0" data-v-88d68326 data-v-c8dd2045><!--[--><span data-v-c8dd2045>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guogao-doc/markdown-examples.html" tabindex="0" data-v-88d68326 data-v-c8dd2045><!--[--><span data-v-c8dd2045>Examples</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guogao-doc/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E6%95%99%E7%A8%8B.html" tabindex="0" data-v-88d68326 data-v-c8dd2045><!--[--><span data-v-c8dd2045>快速上手教程</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guogao-doc/%E5%9F%B9%E8%AE%AD%E8%AF%9D%E6%9C%AF-%E5%AE%8C%E6%95%B4%E7%89%88.html" tabindex="0" data-v-88d68326 data-v-c8dd2045><!--[--><span data-v-c8dd2045>Examples2</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-438b78f0 data-v-039e315e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-039e315e data-v-d16b7b8a data-v-b7e5a6d9><span class="check" data-v-b7e5a6d9><span class="icon" data-v-b7e5a6d9><!--[--><span class="vpi-sun sun" data-v-d16b7b8a></span><span class="vpi-moon moon" data-v-d16b7b8a></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-438b78f0 data-v-1fb4275b data-v-4594f90c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-4594f90c data-v-9d5268b0><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-438b78f0 data-v-15ce5b99 data-v-4b10ab9f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-4b10ab9f><span class="vpi-more-horizontal icon" data-v-4b10ab9f></span></button><div class="menu" data-v-4b10ab9f><div class="VPMenu" data-v-4b10ab9f data-v-18661181><!----><!--[--><!--[--><!----><div class="group" data-v-15ce5b99><div class="item appearance" data-v-15ce5b99><p class="label" data-v-15ce5b99>Appearance</p><div class="appearance-action" data-v-15ce5b99><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-15ce5b99 data-v-d16b7b8a data-v-b7e5a6d9><span class="check" data-v-b7e5a6d9><span class="icon" data-v-b7e5a6d9><!--[--><span class="vpi-sun sun" data-v-d16b7b8a></span><span class="vpi-moon moon" data-v-d16b7b8a></span><!--]--></span></span></button></div></div></div><div class="group" data-v-15ce5b99><div class="item social-links" data-v-15ce5b99><div class="VPSocialLinks social-links-list" data-v-15ce5b99 data-v-4594f90c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-4594f90c data-v-9d5268b0><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-438b78f0 data-v-1d2167b6><span class="container" data-v-1d2167b6><span class="top" data-v-1d2167b6></span><span class="middle" data-v-1d2167b6></span><span class="bottom" data-v-1d2167b6></span></span></button></div></div></div></div><div class="divider" data-v-438b78f0><div class="divider-line" data-v-438b78f0></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-4813dc16 data-v-1dad4ac0><div class="container" data-v-1dad4ac0><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-1dad4ac0 data-v-f4ff6604><button data-v-f4ff6604>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-4813dc16 data-v-97402932><div class="VPDoc has-aside" data-v-97402932 data-v-28ef3a16><!--[--><!--]--><div class="container" data-v-28ef3a16><div class="aside" data-v-28ef3a16><div class="aside-curtain" data-v-28ef3a16></div><div class="aside-container" data-v-28ef3a16><div class="aside-content" data-v-28ef3a16><div class="VPDocAside" data-v-28ef3a16 data-v-46a306fe><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-46a306fe data-v-56286fd3><div class="content" data-v-56286fd3><div class="outline-marker" data-v-56286fd3></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-56286fd3>目录</div><ul class="VPDocOutlineItem root" data-v-56286fd3 data-v-c624256b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-46a306fe></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-28ef3a16><div class="content-container" data-v-28ef3a16><!--[--><!--]--><main class="main" data-v-28ef3a16><div style="position:relative;" class="vp-doc _guogao-doc_%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B%E6%95%99%E7%A8%8B-%E5%8F%A3%E8%AF%AD%E7%89%88" data-v-28ef3a16><div><h1 id="claude-code-快速上手教程-口语版" tabindex="-1">Claude Code 快速上手教程（口语版） <a class="header-anchor" href="#claude-code-快速上手教程-口语版" aria-label="Permalink to &quot;Claude Code 快速上手教程（口语版）&quot;">​</a></h1><blockquote><p>就像老朋友聊天一样，轻松掌握 Claude Code | 真实案例 + 实战演练</p></blockquote><p>大家好！今天咱们来聊聊 Claude Code 这个工具。</p><p>可能有小伙伴会问：用 AI 写代码，直接让它写不就行了吗？为什么还要学什么&quot;三段式工作流&quot;？</p><p><strong>咱先说结论</strong>：如果你想高效地用 AI 写代码，省钱、省时间、代码质量还高，那就一定要学三段式工作流。为什么呢？听我慢慢讲。</p><hr><h2 id="📚-咱们今天要聊的内容" tabindex="-1">📚 咱们今天要聊的内容 <a class="header-anchor" href="#📚-咱们今天要聊的内容" aria-label="Permalink to &quot;📚 咱们今天要聊的内容&quot;">​</a></h2><p>咱们今天的内容分成四个部分：</p><table tabindex="0"><thead><tr><th>部分</th><th>聊什么</th><th>怎么学</th></tr></thead><tbody><tr><td><strong>第一部分</strong></td><td>为什么要用三段式工作流，它和传统方式有什么不同</td><td>听故事，理解理念</td></tr><tr><td><strong>第二部分</strong></td><td>核心语法和技巧，怎么和 AI 说话才有效</td><td>理论 + 动手练</td></tr><tr><td><strong>第三部分</strong></td><td>真实场景演练，手把手教你做</td><td>看案例 + 跟着做</td></tr><tr><td><strong>第四部分</strong></td><td>前人踩过的坑，咱们绕着走</td><td>避坑指南</td></tr></tbody></table><p>好，咱们开始！</p><hr><h2 id="第一部分-为什么要用三段式工作流" tabindex="-1">第一部分：为什么要用三段式工作流 <a class="header-anchor" href="#第一部分-为什么要用三段式工作流" aria-label="Permalink to &quot;第一部分：为什么要用三段式工作流&quot;">​</a></h2><h3 id="先给大家讲个真实的故事" tabindex="-1">先给大家讲个真实的故事 <a class="header-anchor" href="#先给大家讲个真实的故事" aria-label="Permalink to &quot;先给大家讲个真实的故事&quot;">​</a></h3><p>我有个朋友小张，是个后端开发。上个月他接到个需求：给订单系统加个会员折扣功能。</p><p>小张当时刚开始用 AI 写代码，是吧，新手嘛，很激动。他直接就对着 AI 说：</p><blockquote><p>&quot;帮我写一个订单功能，要支持会员折扣&quot;</p></blockquote><p>AI 刷刷刷就给他生成了 500 行代码。小张一看，哎呀，不对啊，还要支持免费次数呢！</p><p>于是又说：</p><blockquote><p>&quot;还要支持免费次数，优先扣免费次数&quot;</p></blockquote><p>AI 又给他重新生成了 500 行代码。小张又发现：哎呀，会员价和原价一样的时候，不应该显示会员标识啊！</p><p>就这样来来回回，改了 12 次，花了整整一天。</p><p><strong>大家猜猜，小张最后怎么样了？</strong></p><p>他累得不行，token 用了一大堆（钱啊！），代码质量还不咋地。最关键的是，他心里慌啊，不知道 AI 生成的代码到底对不对。</p><p>这就是<strong>传统方式的问题</strong>：</p><ul><li>💸 浪费钱（token 消耗大）</li><li>🔄 反复返工（改来改去）</li><li>😰 心里没底（代码质量不可控）</li><li>⏰ 效率反而低了</li></ul><hr><h3 id="后来小张学会了什么" tabindex="-1">后来小张学会了什么？ <a class="header-anchor" href="#后来小张学会了什么" aria-label="Permalink to &quot;后来小张学会了什么？&quot;">​</a></h3><p>后来啊，小张学会了一个方法，叫<strong>三段式工作流</strong>。</p><p>下次又来需求了，还是订单功能，他这么做的：</p><p><strong>第一步：先分析</strong>（不着急写代码）</p><blockquote><p>&quot;咱们先聊聊这个需求，不要写代码哈。我要加个会员折扣，你帮我分析一下，这里面有哪些计费场景？&quot;</p></blockquote><p>AI 回复：</p><blockquote><p>&quot;明白了！我看到这里有 4 种计费场景：</p><ol><li>免费功能，直接创建订单</li><li>付费功能，优先扣免费次数</li><li>无免费次数，会员按会员价</li><li>非会员按原价&quot;</li></ol></blockquote><p>小张一看：<strong>对！这才是我要的！</strong></p><p><strong>第二步：讨论方案</strong>（还是不写代码）</p><blockquote><p>&quot;你说得对！那你给我 2-3 个实现方案，咱们对比一下，看哪个更好。记着，还是不要写代码。&quot;</p></blockquote><p>AI 给了三个方案，分析了优缺点。小张一看，方案 A 最合适。</p><p><strong>第三步：开始干活</strong></p><blockquote><p>&quot;好，就用方案 A！现在可以开始写代码了。&quot;</p></blockquote><p>AI 按照之前确认好的方案，一次性就给了满足需求的代码。</p><p><strong>结果呢？</strong></p><ul><li>只用了 5 轮对话</li><li>一次到位，不用返工</li><li>token 省了一半多</li><li>代码质量可控，心里有底</li></ul><p>小张美滋滋的，下班还能准点回家陪老婆。</p><hr><h3 id="三段式工作流是什么" tabindex="-1">三段式工作流是什么 <a class="header-anchor" href="#三段式工作流是什么" aria-label="Permalink to &quot;三段式工作流是什么&quot;">​</a></h3><p>咱们把它总结一下，看看这个方法到底是啥：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────┐</span></span>
<span class="line"><span>│  第一段：分析 (Analysis)                  │</span></span>
<span class="line"><span>│  ├─ 目标：先把事情搞明白                  │</span></span>
<span class="line"><span>│  ├─ 关键词：&quot;解释一下&quot;、&quot;分析一下&quot;         │</span></span>
<span class="line"><span>│  └─ 重点：一定要加&quot;不要写代码&quot;！！！        │</span></span>
<span class="line"><span>├─────────────────────────────────────────┤</span></span>
<span class="line"><span>│  第二段：设计 (Design)                    │</span></span>
<span class="line"><span>│  ├─ 目标：讨论方案，选最优解              │</span></span>
<span class="line"><span>│  ├─ 关键词：&quot;给我几个方案&quot;、&quot;对比一下&quot;     │</span></span>
<span class="line"><span>│  └─ 重点：还是要说&quot;不要写代码&quot;！！！       │</span></span>
<span class="line"><span>├─────────────────────────────────────────┤</span></span>
<span class="line"><span>│  第三段：实施 (Implementation)            │</span></span>
<span class="line"><span>│  ├─ 目标：开始干活，写代码                │</span></span>
<span class="line"><span>│  ├─ 关键词：&quot;开始编码&quot;、&quot;采用方案 X&quot;      │</span></span>
<span class="line"><span>│  └─ 重点：现在可以写代码了                │</span></span>
<span class="line"><span>└─────────────────────────────────────────┘</span></span></code></pre></div><p><strong>三个核心原则，大家记住了：</strong></p><ol><li><strong>先分析，再设计，后实施</strong> —— 千万别上来就要求写代码</li><li><strong>关键时刻说&quot;不要写代码&quot;</strong> —— 分析和设计阶段必须加这句话</li><li><strong>用 @ 精确引用文件</strong> —— 别说&quot;那个文件 100 行左右&quot;，要说 <code>@service/order.go#L100-120</code></li></ol><hr><h3 id="效果对比-数据说话" tabindex="-1">效果对比：数据说话 <a class="header-anchor" href="#效果对比-数据说话" aria-label="Permalink to &quot;效果对比：数据说话&quot;">​</a></h3><p>咱们用数据说话，是吧：</p><table tabindex="0"><thead><tr><th>对比项</th><th>传统方式（小张之前）</th><th>三段式工作流（小张之后）</th></tr></thead><tbody><tr><td><strong>返工次数</strong></td><td>改了 3-5 次</td><td>基本一次搞定</td></tr><tr><td><strong>花的钱</strong></td><td>Token 用了一大堆</td><td>省了 40-60%</td></tr><tr><td><strong>对话轮数</strong></td><td>聊了 15-20 轮</td><td>只用 5-10 轮</td></tr><tr><td><strong>代码质量</strong></td><td>心里没底</td><td>心里有数</td></tr><tr><td><strong>下班时间</strong></td><td>加班到 9 点</td><td>准点 6 点走</td></tr></tbody></table><p><strong>真实案例：</strong></p><p>任务：给订单接口加会员折扣</p><ul><li>小张之前：12 轮对话，改了 3 次，花了 3 小时</li><li>小张之后：5 轮对话，一次到位，只用 1 小时</li></ul><p><strong>节省时间：50%！</strong></p><hr><h2 id="第二部分-核心语法和技巧" tabindex="-1">第二部分：核心语法和技巧 <a class="header-anchor" href="#第二部分-核心语法和技巧" aria-label="Permalink to &quot;第二部分：核心语法和技巧&quot;">​</a></h2><p>好，原理咱们懂了。现在教大家具体怎么操作。</p><h3 id="语法-1-文件引用符" tabindex="-1">语法 1：@ 文件引用符 <a class="header-anchor" href="#语法-1-文件引用符" aria-label="Permalink to &quot;语法 1：@ 文件引用符&quot;">​</a></h3><p>这个符号啊，就像给 AI 指路一样。</p><p><strong>为什么要用 @？</strong></p><p>来，咱们看两个对比：</p><p>❌ <strong>错误示例</strong>：</p><blockquote><p>&quot;订单文件的第 100 行左右那个函数，改一下&quot;</p></blockquote><p>你猜 AI 会怎么想：</p><ul><li>哪个订单文件？可能有好几个呢</li><li>100 行左右？是 98 还是 102？</li><li>哪个函数？可能有好几个函数呢</li></ul><p>AI 懵了，你也懵了。</p><p>✅ <strong>正确示例</strong>：</p><blockquote><p>&quot;@service/order.go#L100-120 解释一下这个函数&quot;</p></blockquote><p>这下清楚了吧！就像你用手指着代码说：&quot;就是这里！&quot;</p><p><strong>格式总结：</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@文件路径</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    # 引用整个文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@文件路径#L50</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 引用第 50 行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@文件路径#L50-80</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 引用第 50 到 80 行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@文件1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @文件2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 同时引用多个文件</span></span></code></pre></div><p><strong>举个例子：</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 看整个文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api/v1/order.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 看特定行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@service/user.go#L100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 看一段代码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@service/order.go#L50-80</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 同时看多个文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api/v1/order.go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @service/order.go</span></span></code></pre></div><hr><h3 id="语法-2-四个黄金修饰符" tabindex="-1">语法 2：四个黄金修饰符 <a class="header-anchor" href="#语法-2-四个黄金修饰符" aria-label="Permalink to &quot;语法 2：四个黄金修饰符&quot;">​</a></h3><p>这四个词啊，就像魔法咒语一样，特别管用。</p><h4 id="修饰符-1-不要写代码" tabindex="-1">修饰符 1：&quot;不要写代码&quot; <a class="header-anchor" href="#修饰符-1-不要写代码" aria-label="Permalink to &quot;修饰符 1：&quot;不要写代码&quot;&quot;">​</a></h4><p><strong>用途</strong>：让 AI 只动嘴不动手，先分析讨论</p><p><strong>什么时候用</strong>：分析阶段、设计阶段</p><p><strong>例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@service/order.go#L50-100</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">解释一下订单创建的完整流程，不要写代码</span></span></code></pre></div><p>大家记住了，这句话<strong>非常重要</strong>！不加这句话，AI 就会开始写代码，那你的 token 哗哗就没了。</p><hr><h4 id="修饰符-2-先说明" tabindex="-1">修饰符 2：&quot;先说明&quot; <a class="header-anchor" href="#修饰符-2-先说明" aria-label="Permalink to &quot;修饰符 2：&quot;先说明&quot;&quot;">​</a></h4><p><strong>用途</strong>：让 AI 先告诉你打算怎么干，你确认了再干</p><p><strong>什么时候用</strong>：复杂修改、风险高的操作</p><p><strong>例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api/v1/user.go#L50-80</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">删除</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deprecated</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 字段，先说明影响范围，不要写代码</span></span></code></pre></div><p>就像装修房子，师傅得先告诉你怎么改，你点头了他再动手，是吧？</p><hr><h4 id="修饰符-3-直接修改" tabindex="-1">修饰符 3：&quot;直接修改&quot; <a class="header-anchor" href="#修饰符-3-直接修改" aria-label="Permalink to &quot;修饰符 3：&quot;直接修改&quot;&quot;">​</a></h4><p><strong>用途</strong>：简单操作，跳过讨论，直接干</p><p><strong>什么时候用</strong>：改个变量名、加个注释这种小事</p><p><strong>例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@model/user.go#L20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">将</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UserID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 改为</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UID，直接修改</span></span></code></pre></div><p>但是注意啊，只有<strong>非常简单、你心里 100% 有数</strong>的时候才用这个。拿不准就别用。</p><hr><h4 id="修饰符-4-think-hard" tabindex="-1">修饰符 4：&quot;think hard&quot; <a class="header-anchor" href="#修饰符-4-think-hard" aria-label="Permalink to &quot;修饰符 4：&quot;think hard&quot;&quot;">​</a></h4><p><strong>用途</strong>：启动 AI 的深度思考模式，像诸葛亮一样给你出主意</p><p><strong>什么时候用</strong>：复杂架构设计、技术选型、难题分析</p><p><strong>例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">讨论支付系统的架构设计方案，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【需求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 支持微信、支付宝、银行卡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 处理异步回调</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保证事务一致性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 支持退款</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【技术要求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 高并发</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 资金安全</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 易扩展</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">think</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hard</span></span></code></pre></div><p><strong>什么时候该用，什么时候不该用？</strong></p><p>✅ <strong>应该用</strong>：</p><ul><li>复杂的系统架构设计</li><li>需要权衡多个技术方案</li><li>分析疑难杂症的根本原因</li></ul><p>❌ <strong>不需要用</strong>：</p><ul><li>简单的 CRUD（增删改查）</li><li>改个变量名、加个字段</li><li>常规的 Bug 修复</li></ul><p>就像你不会为了买个菜请诸葛亮出谋划策，是吧？</p><hr><h3 id="语法-3-命令符" tabindex="-1">语法 3：/ 命令符 <a class="header-anchor" href="#语法-3-命令符" aria-label="Permalink to &quot;语法 3：/ 命令符&quot;">​</a></h3><p>这个就两个命令，简单：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/clear</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 清空上下文，重新开始</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/init</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 初始化项目，让 AI 了解你的代码库</span></span></code></pre></div><h4 id="clear-什么时候用" tabindex="-1">/clear 什么时候用？ <a class="header-anchor" href="#clear-什么时候用" aria-label="Permalink to &quot;/clear 什么时候用？&quot;">​</a></h4><p>✅ <strong>该用的时候</strong>：</p><ul><li>聊了 50 轮了，AI 开始糊涂了</li><li>切换到完全不同的任务</li><li>AI 开始混淆之前的内容</li></ul><p>❌ <strong>不该用的时候</strong>：</p><ul><li>任务还没做完（会丢失上下文）</li><li>只是换了个文件（没必要清空）</li></ul><h4 id="init-什么时候用" tabindex="-1">/init 什么时候用？ <a class="header-anchor" href="#init-什么时候用" aria-label="Permalink to &quot;/init 什么时候用？&quot;">​</a></h4><p>✅ <strong>该用的时候</strong>：</p><ul><li>第一次在这个项目里用 Claude Code</li><li>项目结构或技术栈大改了</li><li>开始一个新模块的开发</li></ul><p>❌ <strong>不该用的时候</strong>：</p><ul><li>已经在干活了</li><li>只是临时看个文件</li></ul><hr><h3 id="语法-4-结构化描述" tabindex="-1">语法 4：结构化描述 <a class="header-anchor" href="#语法-4-结构化描述" aria-label="Permalink to &quot;语法 4：结构化描述&quot;">​</a></h3><p>这个很重要！咱们用【】这个符号来组织信息。</p><p><strong>为什么要用？</strong></p><p>你要是一股脑把需求扔给 AI，AI 容易漏掉东西。用结构化描述，就像给 AI 列了个清单。</p><p><strong>例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【需求背景】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">现有功能管理页面太乱了，用户找不到东西</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【功能目标】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">做一个统一的功能管理页面，要包括：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 价格配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 免费次数设置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 平台支持</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【技术要求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 响应时间要快，500ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 以内</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 支持批量导入</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置变更要记录日志（老板要查的）</span></span></code></pre></div><p>这样一写，清清楚楚，AI 也不会漏掉。</p><hr><h3 id="三段式工作流实操" tabindex="-1">三段式工作流实操 <a class="header-anchor" href="#三段式工作流实操" aria-label="Permalink to &quot;三段式工作流实操&quot;">​</a></h3><p>好，语法学完了，咱们来看看具体怎么用三段式。</p><h4 id="第一段-分析阶段" tabindex="-1">第一段：分析阶段 <a class="header-anchor" href="#第一段-分析阶段" aria-label="Permalink to &quot;第一段：分析阶段&quot;">​</a></h4><p><strong>目标</strong>：先把事情搞明白，别盲目动手</p><p><strong>模板</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{文件}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{行号}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 解释一下{功能}，不要写代码</span></span></code></pre></div><p><strong>完整例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api/v1/order.go#L50-100</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">解释一下订单创建的完整流程，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请说明：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 输入参数和返回值是什么</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 核心步骤有哪些</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 边界条件怎么处理的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 错误怎么处理的</span></span></code></pre></div><p><strong>AI 会告诉你</strong>：</p><ul><li>这个函数是干啥的</li><li>关键步骤是啥</li><li>有哪些边界情况</li><li>可能有什么问题</li></ul><p><strong>你要做的</strong>：</p><ul><li>确认 AI 理解对了</li><li>看看有没有漏的</li><li>决定要不要看更多代码</li></ul><hr><h4 id="第二段-设计阶段" tabindex="-1">第二段：设计阶段 <a class="header-anchor" href="#第二段-设计阶段" aria-label="Permalink to &quot;第二段：设计阶段&quot;">​</a></h4><p><strong>目标</strong>：讨论方案，选最优解</p><p><strong>模板</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">讨论需求，不要写代码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{详细说明需求}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">有没有更好的方案，不要写代码</span></span></code></pre></div><p><strong>完整例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">讨论需求，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【当前功能】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">订单创建接口，所有用户统一价格</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【需要增加的逻辑】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">根据用户类型计费：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 场景</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 免费功能，直接创建订单</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 场景</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 付费功能，优先扣免费次数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 场景</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 无免费次数，会员按会员价</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 场景</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 非会员按原价</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【技术要求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 免费次数扣减和订单创建要在同一事务（不能扣了次数订单没建上）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 会员价等于原价时，不显示会员标识（别让用户觉得被骗了）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请给出</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 个实现方案，不要写代码</span></span></code></pre></div><p><strong>AI 会给你</strong>：</p><ul><li>方案 A、B、C</li><li>每个方案的优缺点</li><li>推荐用哪个，为什么</li></ul><p><strong>你接下来要这样</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">采用方案</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B，请详细说明实施步骤，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">包括：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 数据查询顺序</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 判断逻辑</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 事务范围</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 返回字段怎么设计</span></span></code></pre></div><hr><h4 id="第三段-实施阶段" tabindex="-1">第三段：实施阶段 <a class="header-anchor" href="#第三段-实施阶段" aria-label="Permalink to &quot;第三段：实施阶段&quot;">​</a></h4><p><strong>目标</strong>：开始写代码</p><p><strong>模板</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">采用方案</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{X}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">，开始编码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">要求：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 遵循</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CLAUDE.md</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 中的规范</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {其他约束}</span></span></code></pre></div><p><strong>完整例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">采用方案</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B，开始编码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【编码规范】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 遵循</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CLAUDE.md</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 中的分层规范</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 错误处理统一用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg/errors</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【实施顺序】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 先写</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Model</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层（数据查询）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 再写</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层（业务逻辑）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 最后写</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层（接口）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">每完成一层暂停一下，等我确认再继续</span></span></code></pre></div><p><strong>AI 会</strong>：</p><ul><li>按顺序生成代码</li><li>每层完成后暂停</li></ul><p><strong>你要做的</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第一层写完了</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ok，继续</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第二层写完了</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ok，继续</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 全都写完了</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">完美！生成一下单元测试</span></span></code></pre></div><hr><h3 id="💡-动手练习-1" tabindex="-1">💡 动手练习 1 <a class="header-anchor" href="#💡-动手练习-1" aria-label="Permalink to &quot;💡 动手练习 1&quot;">​</a></h3><p>好，理论讲完了，咱们来练一练。</p><p><strong>任务</strong>：假设你有个文件 <code>service/user.go</code>，第 50-100 行是用户注册函数。现在要加手机号验证。</p><p><strong>请你写出</strong>：</p><ol><li>分析阶段的提示词</li><li>设计阶段的提示词</li><li>实施阶段的提示词</li></ol><p><strong>提示</strong>：</p><ul><li>记得用 @</li><li>记得加&quot;不要写代码&quot;</li><li>用【】来组织信息</li></ul><p><strong>先别看答案，自己写写看！</strong></p><p>写完了吗？好，咱们看看参考答案：</p><details class="details custom-block"><summary>点击查看参考答案</summary><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【分析阶段】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@service/user.go#L50-100</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">解释一下用户注册函数的完整流程，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请说明：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 当前是怎么验证的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 数据怎么存的</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 错误怎么处理的</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【设计阶段】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">讨论需求，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【当前功能】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">用户注册，验证邮箱后创建账户</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【需要增加】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">增加手机号验证：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 发送验证码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 验证码</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 分钟有效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 验证通过才能注册</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请给出实现方案，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【实施阶段】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">采用你推荐的方案，开始编码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">要求：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 遵循现有的错误处理方式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 验证码存到</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Redis</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 每完成一个函数暂停一下</span></span></code></pre></div></details><hr><h2 id="第三部分-实战演练" tabindex="-1">第三部分：实战演练 <a class="header-anchor" href="#第三部分-实战演练" aria-label="Permalink to &quot;第三部分：实战演练&quot;">​</a></h2><p>好，咱们来看几个真实场景。</p><h3 id="场景-1-简单逻辑增加" tabindex="-1">场景 1：简单逻辑增加 <a class="header-anchor" href="#场景-1-简单逻辑增加" aria-label="Permalink to &quot;场景 1：简单逻辑增加&quot;">​</a></h3><h4 id="真实需求" tabindex="-1">真实需求 <a class="header-anchor" href="#真实需求" aria-label="Permalink to &quot;真实需求&quot;">​</a></h4><p>产品经理来了：</p><blockquote><p>&quot;小李啊，用户信息接口里，如果用户是会员，额外返回会员等级和过期时间。&quot;</p></blockquote><p>小李一听：简单！但是呢，他学聪明了，用三段式。</p><p><strong>当前代码</strong>：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// api/v1/user.go L50-80</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetUserInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    userID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetUserByID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, err)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">H</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: user.ID,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: user.Username,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: user.Email,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>复杂度</strong>：🟢 简单（2-3 轮对话）</p><hr><h4 id="第-1-轮-理解-设计" tabindex="-1">第 1 轮：理解 + 设计 <a class="header-anchor" href="#第-1-轮-理解-设计" aria-label="Permalink to &quot;第 1 轮：理解 + 设计&quot;">​</a></h4><p>小李这样写提示词：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@api/v1/user.go#L50-80</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【当前功能】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">获取用户基本信息接口</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【需要增加】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">如果用户是会员，额外返回：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> member_level:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 会员等级</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> member_expire_at:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 会员过期时间</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【要求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 非会员用户不返回这些字段（别给空值，影响前端判断）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> omitempty</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保持向后兼容（老版本</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> App</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 不会报错）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请先：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 复述一下当前函数的逻辑</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 说说你的修改建议</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">不要写代码</span></span></code></pre></div><p>AI 回复后，小李确认理解正确。</p><hr><h4 id="第-2-轮-实施" tabindex="-1">第 2 轮：实施 <a class="header-anchor" href="#第-2-轮-实施" aria-label="Permalink to &quot;第 2 轮：实施&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">方案合理，开始修改</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">要求：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 新增字段用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> json:&quot;,omitempty&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 标签</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 加上注释说明</span></span></code></pre></div><p>AI 生成代码，一次搞定！</p><hr><h4 id="关键要点" tabindex="-1">关键要点 <a class="header-anchor" href="#关键要点" aria-label="Permalink to &quot;关键要点&quot;">​</a></h4><p>✅ <strong>小李做对了什么</strong>：</p><ul><li>先理解现状，没盲目加字段</li><li>考虑了向后兼容性（omitempty）</li><li>想到了非会员场景</li></ul><p>❌ <strong>常见错误</strong>（小李以前会犯的）：</p><ul><li>直接说&quot;加两个字段&quot;，没理解现有逻辑</li><li>忘记向后兼容，老版本 App 崩溃了</li><li>没测试非会员，上线后发现返回了空值</li></ul><hr><h3 id="💡-动手练习-2" tabindex="-1">💡 动手练习 2 <a class="header-anchor" href="#💡-动手练习-2" aria-label="Permalink to &quot;💡 动手练习 2&quot;">​</a></h3><p><strong>你的任务</strong>：在商品列表接口中，如果商品有折扣，额外返回折扣信息</p><p><strong>思考题</strong>：</p><ol><li>折扣信息应该包含哪些字段？（折扣价？折扣率？）</li><li>怎么判断商品是否有折扣？</li><li>写出完整的 2 轮提示词</li></ol><p>先自己想想，再往下看。</p><hr><h3 id="场景-2-bug-修复" tabindex="-1">场景 2：Bug 修复 <a class="header-anchor" href="#场景-2-bug-修复" aria-label="Permalink to &quot;场景 2：Bug 修复&quot;">​</a></h3><h4 id="真实-bug" tabindex="-1">真实 Bug <a class="header-anchor" href="#真实-bug" aria-label="Permalink to &quot;真实 Bug&quot;">​</a></h4><p>用户在群里 @小张：</p><blockquote><p>&quot;我创建了一个订单，免费次数怎么少了 2 次？！&quot;</p></blockquote><p>小张一看数据库，确实扣了 2 次。出 Bug 了！</p><p><strong>问题代码</strong>：</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// service/order.go L100-130</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">functionID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 查询免费次数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    usage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetUsage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userID, functionID)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> usage.FreeCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 扣减免费次数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DecrementFreeCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userID, functionID)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 创建订单</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    order </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserID: userID,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        FunctionID: functionID,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CreateOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>复杂度</strong>：🟡 中等（3-4 轮）</p><hr><h4 id="第-1-轮-问题复现" tabindex="-1">第 1 轮：问题复现 <a class="header-anchor" href="#第-1-轮-问题复现" aria-label="Permalink to &quot;第 1 轮：问题复现&quot;">​</a></h4><p>小张这样描述问题：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">遇到问题了，帮我定位一下</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【问题描述】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">用户创建订单后，免费次数被扣了</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 次</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【复现步骤】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户有</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 次免费次数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 创建</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 个订单</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 免费次数变成</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3（应该是</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【预期行为】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">创建</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 个订单，免费次数扣</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 次</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【相关代码】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@service/order.go#L100-130</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请分析可能的原因，不要写代码</span></span></code></pre></div><hr><h4 id="第-2-轮-根因分析" tabindex="-1">第 2 轮：根因分析 <a class="header-anchor" href="#第-2-轮-根因分析" aria-label="Permalink to &quot;第 2 轮：根因分析&quot;">​</a></h4><p>AI 给了初步分析后，小张继续深入：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">基于代码分析根本原因，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【分析内容】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 为什么会扣两次？（是不是有地方调用了两次？）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 是否有并发问题？（两个请求同时进来？）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 是否缺少事务？（扣次数和建订单不是原子操作？）</span></span></code></pre></div><p>AI 分析：可能是并发问题，两个请求同时读到了 FreeCount &gt; 0，然后都去扣减了。</p><hr><h4 id="第-3-轮-修复方案" tabindex="-1">第 3 轮：修复方案 <a class="header-anchor" href="#第-3-轮-修复方案" aria-label="Permalink to &quot;第 3 轮：修复方案&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请给出修复方案，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【方案要求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 解决并发问题（用锁？用事务？）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保证一致性（扣次数和建订单要么都成功，要么都失败）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 改动要小（别大改，风险大）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">如果有多个方案，对比说明一下</span></span></code></pre></div><p>AI 给了三个方案：</p><ul><li>方案 A：用数据库事务</li><li>方案 B：用分布式锁</li><li>方案 C：改成乐观锁</li></ul><p>小张选了方案 A，最简单。</p><hr><h4 id="第-4-轮-实施修复" tabindex="-1">第 4 轮：实施修复 <a class="header-anchor" href="#第-4-轮-实施修复" aria-label="Permalink to &quot;第 4 轮：实施修复&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">采用方案</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> A（用事务），开始修复</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">要求：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 订单创建和次数扣减在同一事务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 加上错误回滚逻辑</span></span></code></pre></div><p>AI 生成代码，Bug 修复！</p><hr><h4 id="关键要点-1" tabindex="-1">关键要点 <a class="header-anchor" href="#关键要点-1" aria-label="Permalink to &quot;关键要点&quot;">​</a></h4><p>✅ <strong>小张做对了什么</strong>：</p><ul><li>详细描述了问题现象（不是说&quot;扣错了&quot;，而是说&quot;应该扣 1 次结果扣了 2 次&quot;）</li><li>分析了根本原因（并发问题）</li><li>考虑了方案对比（不是拿到一个方案就用）</li><li>保证了一致性（用事务）</li></ul><p>❌ <strong>常见错误</strong>：</p><ul><li>描述不清楚：&quot;有个 Bug，帮我看看&quot;（AI 懵了）</li><li>没考虑并发：&quot;加个判断就行了&quot;（治标不治本）</li><li>直接要求改代码，没分析原因（可能改出新 Bug）</li></ul><hr><h3 id="💡-动手练习-3" tabindex="-1">💡 动手练习 3 <a class="header-anchor" href="#💡-动手练习-3" aria-label="Permalink to &quot;💡 动手练习 3&quot;">​</a></h3><p><strong>Bug</strong>：用户修改密码后，还能用旧密码登录</p><p><strong>你的任务</strong>：</p><ol><li>写出问题复现的提示词</li><li>写出根因分析的提示词</li><li>思考可能的原因（是不是缓存？是不是 token 没失效？）</li></ol><p>先自己想想，这个 Bug 怎么描述。</p><hr><h3 id="场景-3-复杂方案选择" tabindex="-1">场景 3：复杂方案选择 <a class="header-anchor" href="#场景-3-复杂方案选择" aria-label="Permalink to &quot;场景 3：复杂方案选择&quot;">​</a></h3><h4 id="真实需求-1" tabindex="-1">真实需求 <a class="header-anchor" href="#真实需求-1" aria-label="Permalink to &quot;真实需求&quot;">​</a></h4><p>老板发话了：</p><blockquote><p>&quot;咱们的计费太单一了，要支持按次、按天、按月、阶梯定价！&quot;</p></blockquote><p>小王一听，这可是个大活啊。他用三段式，step by step 来。</p><p><strong>当前</strong>：只支持按次计费</p><p><strong>复杂度</strong>：🔴 复杂（4-6 轮）</p><hr><h4 id="第-1-轮-需求讨论" tabindex="-1">第 1 轮：需求讨论 <a class="header-anchor" href="#第-1-轮-需求讨论" aria-label="Permalink to &quot;第 1 轮：需求讨论&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">讨论需求，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【背景】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">当前订单系统只支持按次计费（每次调用扣一次钱）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【新需求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">要支持</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 种计费方式：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 按次计费（现有的，不能动）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 按天计费（买一天，24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 小时随便用）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 按月计费（买一个月，30</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 天随便用）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 阶梯定价（用得越多，单价越便宜）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【技术要求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 不能影响现有的按次计费订单（老用户不能受影响）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 要能方便地加新计费方式（以后可能还有按年的）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 计费逻辑要可配置（不能写死在代码里）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请分析：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 现有架构支不支持</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 需要加哪些表或字段</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 主要的技术难点是什么</span></span></code></pre></div><hr><h4 id="第-2-轮-方案对比" tabindex="-1">第 2 轮：方案对比 <a class="header-anchor" href="#第-2-轮-方案对比" aria-label="Permalink to &quot;第 2 轮：方案对比&quot;">​</a></h4><p>AI 分析完后，小王继续：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">基于你的分析，给我</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 个设计方案，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">对比维度：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 实施复杂度（越简单越好）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 扩展性（以后好不好加新计费方式）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 维护成本（会不会越改越乱）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 对现有系统的影响（改动大不大）</span></span></code></pre></div><p>AI 给了三个方案：</p><ul><li>方案 A：在原来代码里加 if-else（简单但不优雅）</li><li>方案 B：用策略模式（优雅但要重构）</li><li>方案 C：做成插件式（灵活但复杂）</li></ul><p>小王选了方案 B，虽然要重构，但长期看更好维护。</p><hr><h4 id="第-3-轮-详细设计" tabindex="-1">第 3 轮：详细设计 <a class="header-anchor" href="#第-3-轮-详细设计" aria-label="Permalink to &quot;第 3 轮：详细设计&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">采用方案</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B（策略模式），详细说明实施步骤，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">包括：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 数据库要怎么设计（表结构、字段）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 代码怎么分层</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 怎么保证向后兼容（老订单不能出问题）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 实施顺序是什么（先做啥后做啥）</span></span></code></pre></div><hr><h4 id="第-4-轮-需求确认" tabindex="-1">第 4 轮：需求确认 <a class="header-anchor" href="#第-4-轮-需求确认" aria-label="Permalink to &quot;第 4 轮：需求确认&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请复述以下内容，确认咱们理解一致，不要写代码：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 数据库设计</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 计费策略怎么选择</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 怎么保证老订单不受影响</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 新增计费方式的流程</span></span></code></pre></div><p>AI 复述一遍，小王确认：对！就是这样！</p><hr><h4 id="第-5-6-轮-分步实施" tabindex="-1">第 5-6 轮：分步实施 <a class="header-anchor" href="#第-5-6-轮-分步实施" aria-label="Permalink to &quot;第 5-6 轮：分步实施&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">确认无误，开始编码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【实施顺序】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 先改数据库（加表加字段）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 再写计费策略接口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 实现</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 种计费策略</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 修改订单创建逻辑</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">每完成一步暂停，等我确认</span></span></code></pre></div><p>AI 一步步来，小王每步都确认，最后完美完成！</p><hr><h4 id="关键要点-2" tabindex="-1">关键要点 <a class="header-anchor" href="#关键要点-2" aria-label="Permalink to &quot;关键要点&quot;">​</a></h4><p>✅ <strong>小王做对了什么</strong>：</p><ul><li>充分的需求讨论（不是上来就写）</li><li>多个方案对比（不是拿到一个就用）</li><li>详细的设计阶段（想清楚再动手）</li><li>需求复述确认（确保理解一致）</li><li>分步实施（一口吃不成胖子）</li></ul><p>❌ <strong>常见错误</strong>：</p><ul><li>没对比方案就选了一个（可能不是最优解）</li><li>忽略向后兼容性（老用户炸了）</li><li>没考虑扩展性（下次加新功能又要大改）</li><li>一次性实现所有功能（容易出 Bug）</li></ul><hr><h2 id="第四部分-快速避坑" tabindex="-1">第四部分：快速避坑 <a class="header-anchor" href="#第四部分-快速避坑" aria-label="Permalink to &quot;第四部分：快速避坑&quot;">​</a></h2><p>咱们来说说前人踩过的坑，大家别再踩了。</p><h3 id="五个最常见的错误" tabindex="-1">五个最常见的错误 <a class="header-anchor" href="#五个最常见的错误" aria-label="Permalink to &quot;五个最常见的错误&quot;">​</a></h3><h4 id="错误-1-没理解就修改" tabindex="-1">错误 1：没理解就修改 <a class="header-anchor" href="#错误-1-没理解就修改" aria-label="Permalink to &quot;错误 1：没理解就修改&quot;">​</a></h4><p><strong>小李的故事</strong>：</p><p>小李接到任务，要在订单函数里加会员判断。他直接说：</p><p>❌ <strong>错误示例</strong>：</p><blockquote><p>&quot;@service/order.go#L50-150 帮我在这里加个会员判断逻辑&quot;</p></blockquote><p>结果 AI 不知道加哪儿，变量有没有初始化，加进去代码直接报错。</p><p><strong>问题在哪</strong>：</p><ul><li>AI 不知道插入哪里</li><li>不知道变量是否已初始化</li><li>可能破坏原有流程</li></ul><p>✅ <strong>正确做法</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@service/order.go#L50-150</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请先解释一下当前函数的完整逻辑，不要写代码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">（AI</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 解释后）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">理解正确！现在在</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;校验权限&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">之后插入会员判断逻辑</span></span></code></pre></div><p><strong>教训</strong>：先理解，再动手！</p><hr><h4 id="错误-2-描述不清晰" tabindex="-1">错误 2：描述不清晰 <a class="header-anchor" href="#错误-2-描述不清晰" aria-label="Permalink to &quot;错误 2：描述不清晰&quot;">​</a></h4><p><strong>小张的故事</strong>：</p><p>❌ <strong>错误示例</strong>：</p><blockquote><p>&quot;订单文件的第 100 行左右那个函数，改一下&quot;</p></blockquote><p>AI：？？？</p><ul><li>哪个订单文件？</li><li>100 行左右是多少？98？102？105？</li><li>改啥？</li></ul><p>✅ <strong>正确做法</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@service/order.go#L100-120</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">将</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OrderType</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 字段改为</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FunctionKey，要求：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 更新所有引用这个字段的地方</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保持向后兼容</span></span></code></pre></div><p><strong>教训</strong>：说话要具体！用 @ 精确引用！</p><hr><h4 id="错误-3-忽略并发安全" tabindex="-1">错误 3：忽略并发安全 <a class="header-anchor" href="#错误-3-忽略并发安全" aria-label="Permalink to &quot;错误 3：忽略并发安全&quot;">​</a></h4><p><strong>小王的故事</strong>：</p><p>小王要实现扣减免费次数，他说：</p><p>❌ <strong>错误示例</strong>：</p><blockquote><p>&quot;帮我实现扣减免费次数的逻辑&quot;</p></blockquote><p>AI 给了代码，但没考虑并发。结果两个请求同时进来，扣了两次。</p><p><strong>问题</strong>：</p><ul><li>没说明有并发场景</li><li>AI 生成了非并发安全的代码</li></ul><p>✅ <strong>正确做法</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">实现扣减免费次数的逻辑</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【并发要求】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 需要并发安全（同一用户可能同时创建多个订单）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用数据库事务或乐观锁</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 扣减失败要有明确提示</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请先说明并发处理方案，不要写代码</span></span></code></pre></div><p><strong>教训</strong>：想到并发场景，一定要明确说出来！</p><hr><h4 id="错误-4-破坏兼容性" tabindex="-1">错误 4：破坏兼容性 <a class="header-anchor" href="#错误-4-破坏兼容性" aria-label="Permalink to &quot;错误 4：破坏兼容性&quot;">​</a></h4><p><strong>小赵的故事</strong>：</p><p>产品说 nickname 字段不用了，小赵直接：</p><p>❌ <strong>错误示例</strong>：</p><blockquote><p>&quot;删除 user 表的 nickname 字段&quot;</p></blockquote><p>结果线上老版本 App 全崩了，因为还在用这个字段。</p><p><strong>问题</strong>：</p><ul><li>没检查哪些地方还在用</li><li>可能导致线上故障</li></ul><p>✅ <strong>正确做法</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@model/user.go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">删除</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nickname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 字段前，请先：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 搜索所有引用这个字段的地方</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 评估影响范围</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 给出兼容性迁移方案</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">不要写代码</span></span></code></pre></div><p><strong>教训</strong>：删东西之前，先看看哪些地方在用！</p><hr><h4 id="错误-5-上下文混乱" tabindex="-1">错误 5：上下文混乱 <a class="header-anchor" href="#错误-5-上下文混乱" aria-label="Permalink to &quot;错误 5：上下文混乱&quot;">​</a></h4><p><strong>小孙的故事</strong>：</p><p>小孙跟 AI 聊了 50 轮了，中途做了好几个不同的任务。</p><p>❌ <strong>错误现象</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第 50 轮</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">小孙:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;继续上一个任务&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AI:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;好的，继续优化订单函数&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">小孙:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;？？？我说的是用户函数啊！&quot;</span></span></code></pre></div><p>AI 混淆了 20 轮前的任务和 40 轮前的任务。</p><p><strong>问题</strong>：</p><ul><li>对话太长</li><li>任务切换没清空上下文</li></ul><p>✅ <strong>正确做法</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换任务时</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/clear</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">继续订单模块开发</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">【上次进度】</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 已完成：Model</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层、Service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 当前：需要完成</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 层</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 关键决策：采用方案</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> B（统一入口）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请先复述一下关键决策，然后咱们继续</span></span></code></pre></div><p><strong>教训</strong>：对话长了或切换任务，记得 /clear！</p><hr><h3 id="快速检查清单" tabindex="-1">快速检查清单 <a class="header-anchor" href="#快速检查清单" aria-label="Permalink to &quot;快速检查清单&quot;">​</a></h3><p>发送提示词之前，快速检查一下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">□</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 精确引用文件了吗？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">□</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 分析和设计阶段加&quot;不要写代码&quot;了吗？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">□</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 需求描述清楚了吗？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">□</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 考虑并发安全了吗？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">□</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 考虑向后兼容了吗？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">□</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用【】组织信息了吗？</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">□</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 复杂修改先说明方案了吗？</span></span></code></pre></div><p>这几个都打勾了，再发送！</p><hr><h3 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h3><h4 id="q1-我应该什么时候用三段式" tabindex="-1">Q1：我应该什么时候用三段式？ <a class="header-anchor" href="#q1-我应该什么时候用三段式" aria-label="Permalink to &quot;Q1：我应该什么时候用三段式？&quot;">​</a></h4><p><strong>答</strong>：</p><p>✅ <strong>该用的时候</strong>：</p><ul><li>复杂度高于简单修改时</li><li>不确定怎么实现时</li><li>涉及多个文件协作时</li></ul><p>❌ <strong>不用的时候</strong>：</p><ul><li>非常简单的操作（改个变量名）可以直接要求</li></ul><p><strong>经验</strong>：拿不准就用三段式，不会错！</p><hr><h4 id="q2-每次都要走完三个阶段吗" tabindex="-1">Q2：每次都要走完三个阶段吗？ <a class="header-anchor" href="#q2-每次都要走完三个阶段吗" aria-label="Permalink to &quot;Q2：每次都要走完三个阶段吗？&quot;">​</a></h4><p><strong>答</strong>：不一定！看复杂度</p><ul><li><p><strong>简单任务</strong>：分析 + 实施（2 轮）</p><ul><li>例：加个字段</li></ul></li><li><p><strong>中等任务</strong>：分析 + 设计 + 实施（3-5 轮）</p><ul><li>例：加个会员判断</li></ul></li><li><p><strong>复杂任务</strong>：完整三段式（6-10 轮）</p><ul><li>例：重构计费系统</li></ul></li></ul><p><strong>灵活点</strong>，别死板！</p><hr><h4 id="q3-ai-理解错了怎么办" tabindex="-1">Q3：AI 理解错了怎么办？ <a class="header-anchor" href="#q3-ai-理解错了怎么办" aria-label="Permalink to &quot;Q3：AI 理解错了怎么办？&quot;">​</a></h4><p><strong>答</strong>：用纠错模板</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">不对，</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{错误在哪里}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">正确理解应该是：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{详细说明}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请先复述正确的理解，然后重新</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{操作}</span></span></code></pre></div><p><strong>例子</strong>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">不对，我不是要删除这个字段，是要改名</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">正确理解应该是：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">把</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UserID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 改名为</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UID，但要保持向后兼容</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">请先复述正确的理解，然后重新给出方案</span></span></code></pre></div><hr><h2 id="最后的话" tabindex="-1">最后的话 <a class="header-anchor" href="#最后的话" aria-label="Permalink to &quot;最后的话&quot;">​</a></h2><p>好了，咱们的快速上手教程就到这里。</p><p><strong>记住三个关键点：</strong></p><ol><li><strong>三段式工作流</strong>：先分析，再设计，后实施</li><li><strong>精确引用</strong>：用 @ 指定文件和行号</li><li><strong>不要写代码</strong>：分析和设计阶段一定要加这句话</li></ol><p><strong>最重要的是</strong>：马上去实践！</p><p>就像学游泳，光看教程是学不会的，得下水。</p><p><strong>从明天开始</strong>，找个小任务，用三段式走一遍。</p><p>我相信，一周后你会回来感谢我：</p><blockquote><p>&quot;天啊，效率真的提升了！下班时间提前了 1 小时！&quot;</p></blockquote><p><strong>加油，各位开发者！咱们一起提升效率，准点下班！</strong></p><hr><p>如果有问题，欢迎交流讨论！👋</p></div></div></main><footer class="VPDocFooter" data-v-28ef3a16 data-v-3fa11a47><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-3fa11a47><span class="visually-hidden" id="doc-footer-aria-label" data-v-3fa11a47>Pager</span><div class="pager" data-v-3fa11a47><!----></div><div class="pager" data-v-3fa11a47><a class="VPLink link pager-link next" href="/guogao-doc/markdown-examples.html" data-v-3fa11a47><!--[--><span class="desc" data-v-3fa11a47>Next page</span><span class="title" data-v-3fa11a47>Markdown Examples</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"Z0SO5mlP\",\"claude_code_培训教程.md\":\"5x5xO3Vn\",\"index.md\":\"6Il5WFp5\",\"markdown-examples.md\":\"BWSKuzbG\",\"培训话术-完整版.md\":\"DbyPdhbT\",\"培训话术-讲师稿.md\":\"C-Gefa_y\",\"快速上手教程-口语版.md\":\"CcZH0R7I\",\"快速上手教程.md\":\"DTMfI01H\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"My Awesome Project\",\"description\":\"A VitePress Site\",\"base\":\"/guogao-doc/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"快速上手教程\",\"link\":\"/快速上手教程\"},{\"text\":\"Examples2\",\"link\":\"/培训话术-完整版\"}],\"sidebar\":[{\"text\":\"Examples\",\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"}]}],\"outline\":{\"level\":[2,4],\"label\":\"目录\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>